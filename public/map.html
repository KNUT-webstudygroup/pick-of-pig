<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
    <title>Pick Of Pig</title>
    <script type="text/javascript" src="https://oapi.map.naver.com/openapi/v3/maps.js?ncpClientId=81txquof2j&submodules=geocoder"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
</head>
<body>
    <div class="search">
        <input type="text" id="address" />
        <input id="submit" type="button" value="검색" />
    </div>
    <div id="map" style="width:100%;height:800px;"></div>
</body>
<script>

    drawMap();

    function drawMap() {
        var map = new naver.maps.Map("map", {
            center: new naver.maps.LatLng(37.3595316, 127.1052133), // 주소 기본 위치
            zoom: 15,
            mapTypeControl: true
        });
    }

    $('#submit').on('click', function(e) {
        e.preventDefault();
        searchAddressToCoordinate($('#address').val());
    });

    // 주소를 좌표로 변환하여 검색
    function searchAddressToCoordinate(address) {
        naver.maps.Service.geocode({
            query: address
        }, function(status, response) {
            if (status === naver.maps.Service.Status.ERROR) {
                return alert('Something Wrong!');
            }

            if (response.v2.meta.totalCount === 0) {
                return alert('검색된 주소의 개수: ' + response.v2.meta.totalCount);
            }

            var htmlAddresses = [];
                item = response.v2.addresses[0], // 검색 결과의 배열 중 첫번째 주소
                point = new naver.maps.Point(item.x, item.y);

            // if (item.roadAddress) {
            //     htmlAddresses.push('[도로명 주소] ' + item.roadAddress);
            // }

            // if (item.jibunAddress) {
            //     htmlAddresses.push('[지번 주소] ' + item.jibunAddress);
            // }

            // if (item.englishAddress) {
            //     htmlAddresses.push('[영문명 주소] ' + item.englishAddress);
            // }

            insertMarker(item.x, item.y);
        });
    }

    // 새로운 좌표로 지도 이동 후 마커 삽입
    function insertMarker(latitude, longitude) {
        var map = new naver.maps.Map("map", {
            center: new naver.maps.LatLng(longitude, latitude),
            zoom: 15,
            mapTypeControl: true
        });
        var marker = new naver.maps.Marker({
            map: map,
            position: new naver.maps.LatLng(longitude, latitude),
        });
    }

</script>
</html>